<Window x:Class="BSUIRScheduleDESK.Views.EmployeeInfoWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:BSUIRScheduleDESK.Views"
        xmlns:vm="clr-namespace:BSUIRScheduleDESK.ViewModels"
        xmlns:lang="clr-namespace:BSUIRScheduleDESK.Langs"
        xmlns:classes="clr-namespace:BSUIRScheduleDESK.Classes"
        mc:Ignorable="d"
        Title="EmployeeInfoWindow" Height="450" Width="800"
        WindowStyle="None"
        WindowStartupLocation="CenterScreen"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        KeyDown="Window_KeyDown"
        MouseDown="Window_MouseDown"
        x:Name="Root"
        d:DataContext="{d:DesignInstance Type=vm:EmployeeInfoViewModel}">
    
    <Window.Resources>
        <DataTemplate x:Key="JobPositionTemplate" DataType="classes:JobPosition">
            <TextBlock Foreground="{DynamicResource TextBlock.Foreground.Static}">
                <TextBlock.Style>
                    <Style TargetType="{x:Type TextBlock}">
                        <Setter Property="Text">
                            <Setter.Value>
                                <MultiBinding StringFormat="{}• {0}, {1}">
                                    <Binding Path="jobPosition"/>
                                    <Binding Path="department"/>
                                </MultiBinding>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding jobPosition}" Value="">
                                <Setter Property="Text" Value="{Binding department, StringFormat='{}• {0}'}"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </TextBlock.Style>
            </TextBlock>
        </DataTemplate>
        <DataTemplate x:Key="ContactTemplate" DataType="classes:Contact">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="• "
                           Foreground="{DynamicResource TextBlock.Foreground.Static}"/>
                <StackPanel Orientation="Vertical">
                    <TextBlock Text="{Binding phoneNumber}"
                               Foreground="{DynamicResource TextBlock.Foreground.Static}"/>
                    <TextBlock Foreground="{DynamicResource TextBlock.Foreground.Static}">
        <!--maybe add auditory word before number-->
                        <TextBlock.Text>
                            <MultiBinding StringFormat="{}{0}-{1}, {2}">
                                <Binding Path="auditory"/>
                                <Binding Path="buildingNumber"/>
                                <Binding Path="address"/>
                            </MultiBinding>
                        </TextBlock.Text>
                    </TextBlock>
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </Window.Resources>
    
    <Border CornerRadius="10"
            BorderThickness="1"
            BorderBrush="{DynamicResource Window.BorderBrush.Static}"
            Background="{DynamicResource Window.Background.Static}"
            DataContext="{Binding EmployeeInfo}">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="50"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <TextBlock Foreground="{DynamicResource TextBlock.Foreground.Static}"
                       HorizontalAlignment="Center"
                       Grid.Row="0"
                       Margin="10"
                       FontWeight="DemiBold"
                       FontSize="20">
                <TextBlock.Text>
                    <MultiBinding StringFormat="{}{0} {1} {2}">
                        <Binding Path="lastName"/>
                        <Binding Path="firstName"/>
                        <Binding Path="middleName"/>
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
            <Button x:Name="btnClose"
                    Style="{StaticResource ButtonStyle1}"
                    Height="30"
                    Width="30"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Margin="10"
                    Grid.Row="0"
                    Click="btnClose_Click">
                <Path Fill="{DynamicResource Icon.Stroke.Static}"
                      Stretch="Fill"
                      Height="15"
                      Width="15"
                      Data="{StaticResource closeIcon}"/>
                <Button.RenderTransform>
                    <ScaleTransform ScaleX="1" ScaleY="1" CenterX="15" CenterY="15"/>
                </Button.RenderTransform>
            </Button>
            <ScrollViewer Grid.Row="1">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <Image Source="{Binding photoLink}"
                           Height="200"
                           Width="200"
                           Grid.Row="0"
                           Grid.Column="0"
                           ImageFailed="Image_ImageFailed">
                        <Image.Clip>
                            <EllipseGeometry Center="100, 100" RadiusX="100" RadiusY="100"/>
                        </Image.Clip>
                    </Image>
                    <StackPanel Grid.Row="0"
                                Grid.Column="1"
                                Margin="0,0,25,0">
                        <TextBlock Text="{x:Static lang:Language.JobPosition}"
                                   Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                   FontWeight="DemiBold"
                                   FontSize="16"/>
                        <ItemsControl ItemsSource="{Binding jobPositions}"
                                      ItemTemplate="{StaticResource JobPositionTemplate}"/>

                        <Separator Margin="0,10,0,5"/>

                        <TextBlock Text="{x:Static lang:Language.Contacts}"
                                   Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                   FontWeight="DemiBold"
                                   FontSize="16"/>
                        <TextBlock Foreground="{DynamicResource TextBlock.Foreground.Static}">
                            <TextBlock.Text>
                                <MultiBinding StringFormat="{}• {0}: {1}">
                                    <Binding Source="{x:Static lang:Language.Mail}"/>
                                    <Binding Path="email"/>
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>

                        <ItemsControl ItemsSource="{Binding ElementName=Root, Path=DataContext.Contacts}"
                                      ItemTemplate="{StaticResource ContactTemplate}"/>
                    </StackPanel>
                    <StackPanel Grid.Row="1"
                                Grid.ColumnSpan="2"
                                Orientation="Vertical"
                                Margin="25">
                        <StackPanel>
                            <TextBlock Text="{x:Static lang:Language.CoursesTaught}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       FontWeight="DemiBold"
                                       FontSize="16"/>
                            <ItemsControl ItemsSource="{Binding readingCourses}"
                                          Foreground="{DynamicResource TextBlock.Foreground.Static}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <TextBlock Text="{Binding StringFormat='{}• {0}'}"
                                                   Foreground="{DynamicResource TextBlock.Foreground.Static}"/>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </StackPanel>
                        <StackPanel Visibility="{Binding ElementName=Root, Path=DataContext.IsShowAddInfo[0], Converter={StaticResource BoolToVisConverter}}">
                            <Separator Margin="0,10,0,5"/>
                            <TextBlock Text="{x:Static lang:Language.AreaOfProfessionalInterest}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       FontWeight="DemiBold"
                                       FontSize="16"/>
                            <TextBlock Text="{Binding additionalInformation[0].content}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       TextWrapping="Wrap"/>
                        </StackPanel>
                        <StackPanel Visibility="{Binding ElementName=Root, Path=DataContext.IsShowAddInfo[1], Converter={StaticResource BoolToVisConverter}}">
                            <Separator Margin="0,10,0,5"/>
                            <TextBlock Text="{x:Static lang:Language.Education}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       FontWeight="DemiBold"
                                       FontSize="16"/>
                            <TextBlock Text="{Binding additionalInformation[1].content}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       TextWrapping="Wrap"/>
                        </StackPanel>
                        <StackPanel Visibility="{Binding ElementName=Root, Path=DataContext.IsShowAddInfo[2], Converter={StaticResource BoolToVisConverter}}">
                            <Separator Margin="0,10,0,5"/>
                            <TextBlock Text="{x:Static lang:Language.WorkExperience}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       FontWeight="DemiBold"
                                       FontSize="16"/>
                            <TextBlock Text="{Binding additionalInformation[2].content}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       TextWrapping="Wrap"/>
                        </StackPanel>
                        <StackPanel Visibility="{Binding ElementName=Root, Path=DataContext.IsShowAddInfo[3], Converter={StaticResource BoolToVisConverter}}">
                            <Separator Margin="0,10,0,5"/>
                            <TextBlock Text="{x:Static lang:Language.Merits}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       FontWeight="DemiBold"
                                       FontSize="16"/>
                            <TextBlock Text="{Binding additionalInformation[3].content}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       TextWrapping="Wrap"/>
                        </StackPanel>
                        <StackPanel Visibility="{Binding ElementName=Root, Path=DataContext.IsShowAddInfo[4], Converter={StaticResource BoolToVisConverter}}">
                            <Separator Margin="0,10,0,5"/>
                            <TextBlock Text="{x:Static lang:Language.AdditionalInformation}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       FontWeight="DemiBold"
                                       FontSize="16"/>
                            <TextBlock Text="{Binding additionalInformation[4].content}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       TextWrapping="Wrap"/>
                        </StackPanel>
                        <StackPanel Visibility="{Binding ElementName=Root, Path=DataContext.IsShowAddInfo[5], Converter={StaticResource BoolToVisConverter}}">
                            <Separator Margin="0,10,0,5"/>
                            <TextBlock Text="{x:Static lang:Language.Publications}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       FontWeight="DemiBold"
                                       FontSize="16"/>
                            <TextBlock Text="{Binding additionalInformation[5].content}"
                                       Foreground="{DynamicResource TextBlock.Foreground.Static}"
                                       TextWrapping="Wrap"/>
                        </StackPanel>
                    </StackPanel>
                </Grid>
            </ScrollViewer>
        </Grid>
    </Border>
</Window>
